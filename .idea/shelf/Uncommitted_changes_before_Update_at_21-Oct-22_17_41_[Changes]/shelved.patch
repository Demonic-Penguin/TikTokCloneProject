Index: app/src/main/java/com/example/tiktokcloneproject/HomeScreenActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tiktokcloneproject;\r\n\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\n\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\n\r\npublic class HomeScreenActivity extends Activity implements View.OnClickListener{\r\n\r\n    private Button btnProfile;\r\n    private Button btnSearch;\r\n    private TextView tvVideo; // DE TEST. Sau nay sua thanh clip de xem\r\n\r\n    FirebaseAuth mAuth;\r\n    FirebaseUser user;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_home_screen);\r\n\r\n        tvVideo = (TextView) findViewById(R.id.tvVideo);\r\n        btnProfile = (Button) findViewById(R.id.btnProfile);\r\n        btnSearch=(Button) findViewById(R.id.btnSearch);\r\n\r\n        btnProfile.setOnClickListener(this);\r\n        btnSearch.setOnClickListener(this);\r\n\r\n        mAuth = FirebaseAuth.getInstance();\r\n        user = mAuth.getCurrentUser();\r\n\r\n        if (user != null)\r\n        {\r\n            tvVideo.setText(\"Đã Đăng Nhập\");\r\n        }\r\n        else\r\n        {\r\n            tvVideo.setText(\"Chưa Đăng Nhập\");\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onClick(View view) {\r\n        if (view.getId() == btnProfile.getId())\r\n        {\r\n            if (user!=null)\r\n            {\r\n                Intent intent = new Intent(HomeScreenActivity.this, ProfileActivity.class);\r\n                startActivity(intent);\r\n            }\r\n            else\r\n            {\r\n                Intent intent = new Intent(HomeScreenActivity.this, MainActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        }\r\n\r\n        if (view.getId() == btnSearch.getId())\r\n        {\r\n            Intent intent = new Intent(HomeScreenActivity.this, SearchActivity.class);\r\n            startActivity(intent);\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/tiktokcloneproject/HomeScreenActivity.java b/app/src/main/java/com/example/tiktokcloneproject/HomeScreenActivity.java
--- a/app/src/main/java/com/example/tiktokcloneproject/HomeScreenActivity.java	(revision aa08d3d006c7b0deb4f1fbd8b8453bafdd22165c)
+++ b/app/src/main/java/com/example/tiktokcloneproject/HomeScreenActivity.java	(date 1665910688000)
@@ -1,6 +1,7 @@
 package com.example.tiktokcloneproject;
 
 
+import androidx.annotation.NonNull;
 import androidx.appcompat.app.AppCompatActivity;
 
 import android.app.Activity;
@@ -34,17 +35,29 @@
         btnProfile.setOnClickListener(this);
         btnSearch.setOnClickListener(this);
 
-        mAuth = FirebaseAuth.getInstance();
-        user = mAuth.getCurrentUser();
+//        FirebaseAuth.getInstance().addAuthStateListener(new FirebaseAuth.AuthStateListener() {
+//            @Override
+//            public void onAuthStateChanged(@NonNull FirebaseAuth firebaseAuth) {
+//                user = firebaseAuth.getCurrentUser();
+//                if (user != null) {
+//                    tvVideo.setText("Đã Đăng Nhập");
+//                }
+//                else
+//                {
+//                    tvVideo.setText("Chưa Đăng Nhập");
+//                }
+//            }
+//        });
 
-        if (user != null)
-        {
-            tvVideo.setText("Đã Đăng Nhập");
-        }
-        else
-        {
-            tvVideo.setText("Chưa Đăng Nhập");
-        }
+//        if (user != null)
+//        {
+//            tvVideo.setText("Đã Đăng Nhập");
+//        }
+//        else
+//        {
+//            tvVideo.setText("Chưa Đăng Nhập");
+//        }
+
     }
 
     @Override
Index: app/src/main/java/com/example/tiktokcloneproject/SigninPage.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tiktokcloneproject;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.Toast;\r\n\r\nimport com.google.firebase.firestore.DocumentSnapshot;\r\nimport com.google.firebase.firestore.FirebaseFirestore;\r\n\r\npublic class SigninPage extends Activity implements View.OnClickListener {\r\n    private LinearLayout llSigninPage, llChoice, llPhone, llWait;\r\n    private EditText edtPhone, edtPassword, edtConfirm;\r\n    private Button btnPhone, btnChoicePhone, btnChoiceEmail, btnChoiceFacebook, btnBackToHomeScreen,\r\n            btnBackToChoice;\r\n    private final int VISIBLE = View.VISIBLE;\r\n    private final int GONE = View.GONE;\r\n    //////thread/////\r\n    private String msg;\r\n    Handler handler = new Handler();\r\n    /////firebase///////\r\n    private FirebaseFirestore db;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_signin_page);\r\n\r\n        llSigninPage = (LinearLayout) findViewById(R.id.llSigninPage);\r\n        llPhone = (LinearLayout) llSigninPage.findViewById(R.id.llPhone);\r\n        llChoice = (LinearLayout) llSigninPage.findViewById(R.id.llChoice);\r\n        llWait = (LinearLayout) llSigninPage.findViewById(R.id.llWait);\r\n        edtPhone = (EditText) llSigninPage.findViewById(R.id.edtPhone);\r\n        edtPassword = (EditText) llSigninPage.findViewById(R.id.edtPassword);\r\n        edtConfirm = (EditText) llSigninPage.findViewById(R.id.edtConfirm);\r\n        btnPhone = (Button) llSigninPage.findViewById(R.id.btnPhone);\r\n        btnChoicePhone = (Button) llSigninPage.findViewById(R.id.btnChoicePhone);\r\n        btnChoiceEmail = (Button) llSigninPage.findViewById(R.id.btnChoiceEmail);\r\n        btnChoiceFacebook = (Button) llSigninPage.findViewById(R.id.btnChoiceFacebook);\r\n        btnBackToHomeScreen = (Button) llSigninPage.findViewById(R.id.btnBackToHomeScreen);\r\n        btnBackToChoice = (Button) llSigninPage.findViewById(R.id.btnBackToChoice);\r\n\r\n        setVisibleVisibility(llChoice.getId());\r\n        btnPhone.setText(getString(R.string.ic_btnLogin) + getString(R.string.ic_btnLogin));\r\n\r\n        db = FirebaseFirestore.getInstance();\r\n\r\n        btnChoicePhone.setOnClickListener(this);\r\n        btnPhone.setOnClickListener(this);\r\n        btnBackToChoice.setOnClickListener(this);\r\n        btnBackToHomeScreen.setOnClickListener(this);\r\n    }//on create\r\n\r\n    public void onClick(View v) {\r\n        if(v.getId() == btnChoicePhone.getId()) {\r\n            setVisibleVisibility(llPhone.getId());\r\n        }\r\n        if(v.getId() == btnBackToChoice.getId()) {\r\n            setVisibleVisibility(llChoice.getId());\r\n        }\r\n        if(v.getId() == btnBackToHomeScreen.getId()) {\r\n            moveToAnotherActivity(HomeScreenActivity.class);\r\n        }\r\n        if(v.getId() == btnPhone.getId()) {\r\n           handleBtnPhoneClick();\r\n        }\r\n\r\n    }\r\n\r\n    private void setVisibleVisibility(int id) {\r\n        llChoice.setVisibility(GONE);\r\n        llPhone.setVisibility(GONE);\r\n        llWait.setVisibility(GONE);\r\n\r\n        findViewById(id).setVisibility(VISIBLE);\r\n    }\r\n\r\n    private void moveToAnotherActivity(Class<?> cls) {\r\n        Intent intent = new Intent(SigninPage.this, cls);\r\n        intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_CLEAR_TASK);\r\n        startActivity(intent);\r\n\r\n        finish();\r\n    }\r\n\r\n    private void handleBtnPhoneClick() {\r\n        String phone = edtPhone.getText().toString();\r\n        String password = edtPassword.getText().toString();\r\n        if(phone.isEmpty() || !PhoneSignupActivity.isValidPhone(phone)) {\r\n            Toast.makeText(SigninPage.this, getString(R.string.error_PhoneAuth), Toast.LENGTH_SHORT).show();\r\n        } else if(password.isEmpty() || !PhoneSignupActivity.isValidPassword(password)) {\r\n            Toast.makeText(SigninPage.this, getString(R.string.error_Password), Toast.LENGTH_SHORT).show();\r\n        } else {\r\n            String formattedPhone = \"+84\" + phone.substring(phone.length() - 9);\r\n            edtPhone.setText(formattedPhone);\r\n            db.collection(\"users\")\r\n                    .whereEqualTo(\"phone\", formattedPhone)\r\n                    .whereEqualTo(\"password\", password)\r\n                    .get().addOnCompleteListener(task -> {\r\n                        msg = \"FALSE\";\r\n                        if (task.isSuccessful()) {\r\n                            for (DocumentSnapshot document : task.getResult()) {\r\n                                if (document.exists()) {\r\n                                    msg = \"TRUE\";\r\n                                    break;\r\n                                }\r\n                            }\r\n\r\n                        } else {\r\n                            Log.d(\"TAG\", \"Error getting documents: \", task.getException());\r\n                        }\r\n\r\n                        if (msg.equals(\"FALSE\")) {\r\n                            Toast.makeText(SigninPage.this, getString(R.string.error_signin), Toast.LENGTH_SHORT).show();\r\n                            setVisibleVisibility(llPhone.getId());\r\n                        } else {\r\n                            Toast.makeText(SigninPage.this, getString(R.string.successful_signin), Toast.LENGTH_SHORT).show();\r\n                            moveToAnotherActivity(HomeScreenActivity.class);\r\n                        }\r\n                    });\r\n            setVisibleVisibility(llWait.getId());\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/tiktokcloneproject/SigninPage.java b/app/src/main/java/com/example/tiktokcloneproject/SigninPage.java
--- a/app/src/main/java/com/example/tiktokcloneproject/SigninPage.java	(revision aa08d3d006c7b0deb4f1fbd8b8453bafdd22165c)
+++ b/app/src/main/java/com/example/tiktokcloneproject/SigninPage.java	(date 1665911564646)
@@ -13,6 +13,8 @@
 import android.widget.LinearLayout;
 import android.widget.Toast;
 
+import com.google.firebase.auth.FirebaseAuth;
+import com.google.firebase.auth.FirebaseUser;
 import com.google.firebase.firestore.DocumentSnapshot;
 import com.google.firebase.firestore.FirebaseFirestore;
 
@@ -121,7 +123,20 @@
                             Toast.makeText(SigninPage.this, getString(R.string.error_signin), Toast.LENGTH_SHORT).show();
                             setVisibleVisibility(llPhone.getId());
                         } else {
-                            Toast.makeText(SigninPage.this, getString(R.string.successful_signin), Toast.LENGTH_SHORT).show();
+//                            Toast.makeText(SigninPage.this, getString(R.string.successful_signin), Toast.LENGTH_SHORT).show();
+
+//                            FirebaseUser user = FirebaseAuth.getInstance().getCurrentUser();
+//                            if (user != null)
+//                            {
+//                                Toast.makeText(SigninPage.this, user.toString() , Toast.LENGTH_LONG).show();
+//
+//                            }
+//                            else
+//                            {
+//                                Toast.makeText(SigninPage.this, "cac" , Toast.LENGTH_LONG).show();
+//                            }
+
+
                             moveToAnotherActivity(HomeScreenActivity.class);
                         }
                     });
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"DesignSurface\">\r\n    <option name=\"filePathToZoomLevelMap\">\r\n      <map>\r\n        <entry key=\"..\\:/Mobile/Final_project/app/src/main/res/drawable/btn_login_shape.xml\" value=\"0.176\" />\r\n        <entry key=\"..\\:/Mobile/Final_project/app/src/main/res/drawable/btn_shape.xml\" value=\"0.11\" />\r\n        <entry key=\"..\\:/Mobile/Final_project/app/src/main/res/layout/activity_delete_account.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/Mobile/Final_project/app/src/main/res/layout/activity_home_screen.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/Mobile/Final_project/app/src/main/res/layout/activity_main.xml\" value=\"0.14130434782608695\" />\r\n        <entry key=\"..\\:/Mobile/Final_project/app/src/main/res/layout/activity_phone_login.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/Mobile/Final_project/app/src/main/res/layout/activity_phone_register.xml\" value=\"0.14130434782608695\" />\r\n        <entry key=\"..\\:/Mobile/Final_project/app/src/main/res/layout/activity_phone_signup.xml\" value=\"0.1\" />\r\n        <entry key=\"..\\:/Mobile/Final_project/app/src/main/res/layout/activity_signin_page.xml\" value=\"0.1\" />\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_11\" default=\"true\" project-jdk-name=\"Android Studio default JDK\" project-jdk-type=\"JavaSDK\">\r\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\r\n  </component>\r\n  <component name=\"ProjectType\">\r\n    <option name=\"id\" value=\"Android\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision aa08d3d006c7b0deb4f1fbd8b8453bafdd22165c)
+++ b/.idea/misc.xml	(date 1665909288459)
@@ -3,15 +3,22 @@
   <component name="DesignSurface">
     <option name="filePathToZoomLevelMap">
       <map>
+        <entry key="..\:/AndroidStudioProjects/TikTokCloneProject/app/src/main/res/drawable/btn_login_shape.xml" value="0.1765" />
+        <entry key="..\:/AndroidStudioProjects/TikTokCloneProject/app/src/main/res/layout/activity_delete_account.xml" value="0.16770833333333332" />
+        <entry key="..\:/AndroidStudioProjects/TikTokCloneProject/app/src/main/res/layout/activity_email_log_in.xml" value="0.16770833333333332" />
+        <entry key="..\:/AndroidStudioProjects/TikTokCloneProject/app/src/main/res/layout/activity_home_screen.xml" value="0.2" />
+        <entry key="..\:/AndroidStudioProjects/TikTokCloneProject/app/src/main/res/layout/activity_login_options.xml" value="0.16770833333333332" />
+        <entry key="..\:/AndroidStudioProjects/TikTokCloneProject/app/src/main/res/layout/activity_main.xml" value="0.14722222222222223" />
+        <entry key="..\:/AndroidStudioProjects/TikTokCloneProject/app/src/main/res/layout/activity_phone_signup.xml" value="0.16770833333333332" />
+        <entry key="..\:/AndroidStudioProjects/TikTokCloneProject/app/src/main/res/layout/activity_profile.xml" value="0.16770833333333332" />
+        <entry key="..\:/AndroidStudioProjects/TikTokCloneProject/app/src/main/res/layout/activity_signin_page.xml" value="0.16770833333333332" />
         <entry key="..\:/Mobile/Final_project/app/src/main/res/drawable/btn_login_shape.xml" value="0.176" />
         <entry key="..\:/Mobile/Final_project/app/src/main/res/drawable/btn_shape.xml" value="0.11" />
         <entry key="..\:/Mobile/Final_project/app/src/main/res/layout/activity_delete_account.xml" value="0.1" />
-        <entry key="..\:/Mobile/Final_project/app/src/main/res/layout/activity_home_screen.xml" value="0.1" />
         <entry key="..\:/Mobile/Final_project/app/src/main/res/layout/activity_main.xml" value="0.14130434782608695" />
         <entry key="..\:/Mobile/Final_project/app/src/main/res/layout/activity_phone_login.xml" value="0.1" />
         <entry key="..\:/Mobile/Final_project/app/src/main/res/layout/activity_phone_register.xml" value="0.14130434782608695" />
         <entry key="..\:/Mobile/Final_project/app/src/main/res/layout/activity_phone_signup.xml" value="0.1" />
-        <entry key="..\:/Mobile/Final_project/app/src/main/res/layout/activity_signin_page.xml" value="0.1" />
       </map>
     </option>
   </component>
